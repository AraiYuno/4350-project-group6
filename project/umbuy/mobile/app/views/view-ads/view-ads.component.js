"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var advertisement_service_1 = require("../../services/advertisement.service");
var filterResult_service_1 = require("../../services/filterResult.service");
var allResult_service_1 = require("../../services/allResult.service");
var ViewAdsComponent = /** @class */ (function () {
    // This pattern makes use of Angular’s dependency injection implementation to inject an instance of the ItemService service into this class. 
    // Angular knows about this service because it is included in your app’s main NgModule, defined in app.module.ts.
    function ViewAdsComponent(_advertisementService, _filterResultService, _allResultService) {
        this._advertisementService = _advertisementService;
        this._filterResultService = _filterResultService;
        this._allResultService = _allResultService;
    }
    // TODO: Once advertisements is defined, every time we go back to the /view/ads routing,
    // it says that advertisements is undefined, but we can access the data (?)
    ViewAdsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this._advertisementService.getAllAdvertisements()
            .subscribe(function (res) { return _this.advertisements = _this.filteredAds = res; }, function (err) { return _this.message = err; }, function () {
            _this._filterResultService.changeMessage(_this.filteredAds);
            _this._allResultService.changeMessage(_this.advertisements);
        });
        this._filterResultService.currentMessage.subscribe(function (filteredAds) { return _this.filteredAds = filteredAds; });
    };
    ViewAdsComponent = __decorate([
        core_1.Component({
            selector: "mobile-view-ads",
            moduleId: module.id,
            templateUrl: "./view-ads.component.html",
            providers: [advertisement_service_1.AdvertisementService, filterResult_service_1.FilterResultService, allResult_service_1.AllResultService]
        }),
        __metadata("design:paramtypes", [advertisement_service_1.AdvertisementService, filterResult_service_1.FilterResultService, allResult_service_1.AllResultService])
    ], ViewAdsComponent);
    return ViewAdsComponent;
}());
exports.ViewAdsComponent = ViewAdsComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlldy1hZHMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidmlldy1hZHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQWtEO0FBRWxELDhFQUE0RTtBQUc1RSw0RUFBMEU7QUFDMUUsc0VBQW9FO0FBUXBFO0lBS0ksNklBQTZJO0lBQzdJLGlIQUFpSDtJQUNqSCwwQkFBb0IscUJBQTJDLEVBQVUsb0JBQXlDLEVBQVUsaUJBQW1DO1FBQTNJLDBCQUFxQixHQUFyQixxQkFBcUIsQ0FBc0I7UUFBVSx5QkFBb0IsR0FBcEIsb0JBQW9CLENBQXFCO1FBQVUsc0JBQWlCLEdBQWpCLGlCQUFpQixDQUFrQjtJQUFJLENBQUM7SUFFcEssd0ZBQXdGO0lBQ3hGLDJFQUEyRTtJQUMzRSxtQ0FBUSxHQUFSO1FBQUEsaUJBU0M7UUFSRyxJQUFJLENBQUMscUJBQXFCLENBQUMsb0JBQW9CLEVBQUU7YUFDaEQsU0FBUyxDQUNOLFVBQUEsR0FBRyxJQUFJLE9BQUEsS0FBSSxDQUFDLGNBQWMsR0FBRyxLQUFJLENBQUMsV0FBVyxHQUFHLEdBQUcsRUFBNUMsQ0FBNEMsRUFDbkQsVUFBQSxHQUFHLElBQUksT0FBQSxLQUFJLENBQUMsT0FBTyxHQUFHLEdBQUcsRUFBbEIsQ0FBa0IsRUFDekI7WUFBTyxLQUFJLENBQUMsb0JBQW9CLENBQUMsYUFBYSxDQUFDLEtBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUN6RCxLQUFJLENBQUMsaUJBQWlCLENBQUMsYUFBYSxDQUFDLEtBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQTtRQUFBLENBQUMsQ0FDbkUsQ0FBQztRQUNKLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLFVBQUEsV0FBVyxJQUFJLE9BQUEsS0FBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLEVBQTlCLENBQThCLENBQUMsQ0FBQztJQUN0RyxDQUFDO0lBcEJRLGdCQUFnQjtRQU41QixnQkFBUyxDQUFDO1lBQ1AsUUFBUSxFQUFFLGlCQUFpQjtZQUMzQixRQUFRLEVBQUUsTUFBTSxDQUFDLEVBQUU7WUFDbkIsV0FBVyxFQUFFLDJCQUEyQjtZQUN4QyxTQUFTLEVBQUUsQ0FBQyw0Q0FBb0IsRUFBRSwwQ0FBbUIsRUFBRSxvQ0FBZ0IsQ0FBQztTQUMzRSxDQUFDO3lDQVE2Qyw0Q0FBb0IsRUFBZ0MsMENBQW1CLEVBQTZCLG9DQUFnQjtPQVB0SixnQkFBZ0IsQ0FxQjVCO0lBQUQsdUJBQUM7Q0FBQSxBQXJCRCxJQXFCQztBQXJCWSw0Q0FBZ0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBBZHZlcnRpc2VtZW50IH0gZnJvbSAnLi4vLi4vYXBpL2FkdmVydGlzZW1lbnQnO1xuaW1wb3J0IHsgQWR2ZXJ0aXNlbWVudFNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vc2VydmljZXMvYWR2ZXJ0aXNlbWVudC5zZXJ2aWNlXCI7XG5pbXBvcnQgeyBTZWFyY2hDb21wb25lbnQgfSBmcm9tIFwiLi4vc2VhcmNoL3NlYXJjaC5jb21wb25lbnRcIjtcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMvQmVoYXZpb3JTdWJqZWN0JztcbmltcG9ydCB7IEZpbHRlclJlc3VsdFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9maWx0ZXJSZXN1bHQuc2VydmljZSc7XG5pbXBvcnQgeyBBbGxSZXN1bHRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYWxsUmVzdWx0LnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogXCJtb2JpbGUtdmlldy1hZHNcIixcbiAgICBtb2R1bGVJZDogbW9kdWxlLmlkLFxuICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlldy1hZHMuY29tcG9uZW50Lmh0bWxcIixcbiAgICBwcm92aWRlcnM6IFtBZHZlcnRpc2VtZW50U2VydmljZSwgRmlsdGVyUmVzdWx0U2VydmljZSwgQWxsUmVzdWx0U2VydmljZV1cbn0pXG5leHBvcnQgY2xhc3MgVmlld0Fkc0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gICAgYWR2ZXJ0aXNlbWVudHM6IEFkdmVydGlzZW1lbnRbXTtcbiAgICBmaWx0ZXJlZEFkczogQWR2ZXJ0aXNlbWVudFtdO1xuICAgIG1lc3NhZ2U7XG5cbiAgICAvLyBUaGlzIHBhdHRlcm4gbWFrZXMgdXNlIG9mIEFuZ3VsYXLigJlzIGRlcGVuZGVuY3kgaW5qZWN0aW9uIGltcGxlbWVudGF0aW9uIHRvIGluamVjdCBhbiBpbnN0YW5jZSBvZiB0aGUgSXRlbVNlcnZpY2Ugc2VydmljZSBpbnRvIHRoaXMgY2xhc3MuIFxuICAgIC8vIEFuZ3VsYXIga25vd3MgYWJvdXQgdGhpcyBzZXJ2aWNlIGJlY2F1c2UgaXQgaXMgaW5jbHVkZWQgaW4geW91ciBhcHDigJlzIG1haW4gTmdNb2R1bGUsIGRlZmluZWQgaW4gYXBwLm1vZHVsZS50cy5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9hZHZlcnRpc2VtZW50U2VydmljZTogQWR2ZXJ0aXNlbWVudFNlcnZpY2UsIHByaXZhdGUgX2ZpbHRlclJlc3VsdFNlcnZpY2U6IEZpbHRlclJlc3VsdFNlcnZpY2UsIHByaXZhdGUgX2FsbFJlc3VsdFNlcnZpY2U6IEFsbFJlc3VsdFNlcnZpY2UpIHsgfVxuXG4gICAgLy8gVE9ETzogT25jZSBhZHZlcnRpc2VtZW50cyBpcyBkZWZpbmVkLCBldmVyeSB0aW1lIHdlIGdvIGJhY2sgdG8gdGhlIC92aWV3L2FkcyByb3V0aW5nLFxuICAgIC8vIGl0IHNheXMgdGhhdCBhZHZlcnRpc2VtZW50cyBpcyB1bmRlZmluZWQsIGJ1dCB3ZSBjYW4gYWNjZXNzIHRoZSBkYXRhICg/KVxuICAgIG5nT25Jbml0KCl7XG4gICAgICAgIHRoaXMuX2FkdmVydGlzZW1lbnRTZXJ2aWNlLmdldEFsbEFkdmVydGlzZW1lbnRzKClcbiAgICAgICAgLnN1YnNjcmliZShcbiAgICAgICAgICAgIHJlcyA9PiB0aGlzLmFkdmVydGlzZW1lbnRzID0gdGhpcy5maWx0ZXJlZEFkcyA9IHJlcyxcbiAgICAgICAgICAgIGVyciA9PiB0aGlzLm1lc3NhZ2UgPSBlcnIsXG4gICAgICAgICAgICAoKSA9PiB7dGhpcy5fZmlsdGVyUmVzdWx0U2VydmljZS5jaGFuZ2VNZXNzYWdlKHRoaXMuZmlsdGVyZWRBZHMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hbGxSZXN1bHRTZXJ2aWNlLmNoYW5nZU1lc3NhZ2UodGhpcy5hZHZlcnRpc2VtZW50cyl9XG4gICAgICAgICAgKTsgXG4gICAgICAgIHRoaXMuX2ZpbHRlclJlc3VsdFNlcnZpY2UuY3VycmVudE1lc3NhZ2Uuc3Vic2NyaWJlKGZpbHRlcmVkQWRzID0+IHRoaXMuZmlsdGVyZWRBZHMgPSBmaWx0ZXJlZEFkcyk7XG4gICAgfVxufSJdfQ==